<!--
  templateType: none
-->
<!doctype html>
<html lang="{{ html_lang }}" {{ html_lang_dir }}>
  <head>
    <meta charset="utf-8">
    {% if page_meta.html_title %}<title>{{ page_meta.html_title }} {% if content.language.languageTag == "zh-cn" %}| 蹴蹴ZujuGP{% else %}| ZujuGP{% endif %}</title>{% endif %}
    {% if site_settings.favicon_src %}<link rel="shortcut icon" href="{{ site_settings.favicon_src }}" />{% endif %}
    <meta name="description" content="{{ page_meta.meta_description }}">

    {# Open graph #}
    {% if content.featured_image %}
      <meta property="og:image" content="{{content.featured_image}}" />
    {% else %}
      <meta property="og:image" content="{{ get_asset_url('zuju-theme/images/assets/bg/ZujuGP-OG.png') }}" />
    {% endif %}

    {{ require_css(get_asset_url("../../fonts/stylesheet.css")) }}
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,300;0,400;0,600;0,700;1,400;1,700&family=Roboto+Condensed:wght@400;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" />

    {# This is intended to be used if a template requires template specific style sheets #}
    {% if template_css %}
    {{ require_css(get_asset_url(template_css)) }}
    {{ require_css(template_css) }}
    {% endif %}

    {{ require_css(get_asset_url("../../css/main.css")) }}
    {# To see a full list of what is included via standard_header_includes please reference this article: https://developers.hubspot.com/docs/cms/hubl/variables#required-page-template-variables #}
    {% include '../statics/statics-head.html' %}
    {{ standard_header_includes }}
    {% import 'zuju-theme/macros/tags.html' as c %}
  </head>
  <body>
    <div class="body-wrapper {{ builtin_body_classes }}">
      {% block header %}
        <div class="nav-sticky is-sticky">
          {% global_partial path='../partials/header.html' %}
        </div>
      {% endblock header %}

      {% set currLang = content.language.languageTag != NULL ? content.language.languageTag : "" %}
      {% set currLang = currLang == "" ? request.query_dict['hsLang'] : currLang %}

      <main class="main-wrapper">
        <div class="left-offset"></div>
        <div class="main-wrapper__row">
          <aside class="sidebar">
            {% if request_contact.is_logged_in %}
              <a href="/profile" class="user-card">
                <div class="user-card__avatar">
                  <div class="user-card__avatar-overlay">
                    <svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                          <g id="zuju/members-portal/dashboard" transform="translate(-357.000000, -193.000000)" fill="#FFFFFF" fill-rule="nonzero">
                              <g id="Group-9" transform="translate(341.000000, 177.000000)">
                                  <g id="Group" transform="translate(12.000000, 12.000000)">
                                      <g id="edit" transform="translate(4.000000, 4.000000)">
                                          <path d="M13.1426649,7.99989661 C12.8270666,7.99989661 12.5712331,8.25573014 12.5712331,8.57132847 L12.5712331,14.2855131 C12.5712331,14.6011115 12.3153995,14.856945 11.9998012,14.856945 L1.7142621,14.856945 C1.39866377,14.856945 1.14283024,14.6011115 1.14283024,14.2855131 L1.14283024,2.85711032 C1.14283024,2.54151199 1.39866377,2.28567846 1.7142621,2.28567846 L8.57131049,2.28567846 C8.88690882,2.28567846 9.14274235,2.02984493 9.14274235,1.7142466 C9.14274235,1.39864827 8.88690882,1.14284822 8.57131049,1.14284822 L1.7142621,1.14284822 C0.767500587,1.14284822 0,1.91034881 0,2.85711032 L0,14.2855131 C0,15.2322746 0.767500587,15.9997752 1.7142621,15.9997752 L11.9998347,15.9997752 C12.9465962,15.9997752 13.7140968,15.2322746 13.7140968,14.2855131 L13.7140968,8.57129499 C13.7140968,8.25573014 13.4582632,7.99989661 13.1426649,7.99989661 Z" id="Path"></path>
                                          <path d="M15.3594536,0.640790406 C14.949169,0.230438916 14.39267,8.94339087e-06 13.812399,8.94339087e-06 C13.2317932,-0.00165610025 12.6747249,0.229233576 12.2655788,0.641158704 L4.73879632,8.16730502 C4.67635299,8.2302171 4.62924426,8.30668926 4.60108616,8.39072828 L3.45825593,11.8192525 C3.358514,12.1186792 3.52039793,12.4422461 3.81982461,12.5419546 C3.87791532,12.561307 3.93875154,12.571251 3.99995605,12.571251 C4.06129449,12.571251 4.12226464,12.561307 4.18052276,12.542122 L7.60904696,11.3992917 C7.69325339,11.3711671 7.76975903,11.323824 7.83247022,11.2610124 L15.3592192,3.73426341 C16.2135043,2.88007875 16.2136048,1.49507551 15.3594536,0.640790406 Z M14.5512393,2.92681918 L7.12275901,10.3552994 L4.90335879,11.0964164 L5.64219905,8.87986217 L13.0735252,1.4514154 C13.4820687,1.04367548 14.1438342,1.04434511 14.5515741,1.45288859 C14.746337,1.64805331 14.85609,1.91225726 14.8569304,2.18797891 C14.8576301,2.46517375 14.7475758,2.73115223 14.5512393,2.92681918 Z" id="Shape"></path>
                                      </g>
                                  </g>
                              </g>
                          </g>
                      </g>
                    </svg>
                  </div>
                  {{ c.avatar() }}
                </div>

                {# <textarea name="" id="" cols="30" rows="10">{{ contact|tojson }}</textarea> #}
                <div class="user-card__content">
                  <div class="user-card__name all-caps">{{ request_contact.contact.firstname }} {{ contact.lastname }}</div>
                  <div class="user-card__tier fs-sm">

                    {% if currLang == 'zh-cn' %}
                      {% if contact.membership_tier == 'Fan' %}
                        会员
                      {% elif contact.membership_tier == 'Super Fan' %}
                        超级会员
                      {% else %}
                        终身会员
                      {% endif %}
                    {% else %}
                      {{ contact.membership_tier }}
                    {% endif %}

                  </div>
                  <div class="user-card__point fs-sm">
                    <b>{{ contact.current_loyalty_points }}</b> {{ currLang == "zh-cn" ? " Z 积分" : "Z Points" }}
                  </div>
                </div>
              </a>
            {% endif %}

            <div class="separator">{{ currLang == "zh-cn" ? "菜单" : "Menu" }}</div>
            <!-- Side menu -->
            {% module "side_menu"
              path="/zuju-theme/modules/menu-with-icon",
              label="Secondary Menu (Desktop only)"
            %}

            <div class="separator">{{ currLang == "zh-cn" ? "蹴蹴忠诚积分" : "ZujuGP Loyalty" }}</div>

            {% module "loyalty_menu"
              path="/zuju-theme/modules/v-menu",
              label="Loyalty menu" %}
          </aside>

          <div class="content-wrapper">

            <section class="title-section">
              <h2 class="page-title">
                {% if dynamic_page_hubdb_row %}
                  {% set d = dynamic_page_hubdb_row %}

                  {% if currLang == 'zh-cn' %}
                    {{ d.name_chinese }}
                  {% else%}
                    {{ d.name }}
                  {% endif %}
                {% else %}
                  {{ content.title }}
                {% endif%}
              </h2>

              <!-- Scrollable menu -->
              {% module "scrollable_menu"
                path="/zuju-theme/modules/scrollable-menu",
                label="Secondary menu (mobile only)"
              %}
            </section>

            {% block body %}
            {% endblock body %}
          </div>
        </div>
      </main>

      {% block footer %}
        {% global_partial path='../partials/footer.html' %}
      {% endblock footer %}
    </div>

    {% include "../popups/index.html" %}
    {{ require_js('https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.1/gsap.min.js') }}
    {{ require_js(get_asset_url('../../js/main.js')) }}

    {# Birthday logic #}
    {% set today = today("Asia/Singapore")|datetimeformat('%m/%e/%y') %}
    {% set birthday = contact.birthday %}

    {% if today == birthday %}
      <script>
        window.addEventListener('DOMContentLoaded', (event) => {
          if (!getCookie('birthday-give-claimed')) {
            modalIn('#modal-birthday');
          }
        });
      </script>
    {% endif %}

    {{ standard_footer_includes }}

    {% if request_contact.is_logged_in %}
      {% include '../statics/statics-foot.html' %}
    {% endif %}
  </body>
</html>
