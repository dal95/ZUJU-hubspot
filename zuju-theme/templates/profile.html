<!--
  templateType: page
  isAvailableForNewContent: true
  label: Members Profile
-->
{% extends "./layouts/base-members.html" %}
{% import 'zuju-theme/macros/tags.html' as c %}

{% block body %}
  <style>
    #hs_cos_wrapper_profile_title {
      display: none;
    }
  </style>

  <section class="content-area">
    <div class="main-content">
      <section class="edit">

        {# https://dev.zujugp.com/hubfs/theme-assets/avatars/avatar-01.svg #}
        {# <div class="scrollable">
          <div class="tabs">
            <div class="tabs__menu active" data-tab="content-profile">User Profile</div>
            <div class="tabs__menu" data-tab="content-account">Account</div>
          </div>
        </div> #}

        {# <div id="content-profile" class="tab-content active"> #}
          <div class="avatar-edit">
            {{ c.avatar() }}
          </div>
          {% form "profile" form_to_use='48fa9bbb-c0d8-4996-a45e-de28f83f227a' %}
        {# </div> #}

        {# <div id="content-account" class="tab-content">
          <div class="separator">Account preferences</div>

          <div class="account__email">
            <div>
              <div class="all-caps">Email address</div>
              <div>Samantha@gmail.com</div>
            </div>

            <div>
              <button class="button button--o-primary">Change</button>
            </div>
          </div>

          <div class="account__password">
            <div>
              <div class="all-caps">Password</div>
            </div>

            <div>
              <button class="button button--o-primary">Change</button>
            </div>
          </div>
        </div> #}
      </section>
    </div>
  </section>

  <script>
    const contact = JSON.parse(`{{ contact|tojson }}`)
    window.addEventListener('message', event => {
      if(event.data.type === 'hsFormCallback' && event.data.eventName === 'onFormReady') {
        $('[name="custom_avatar"]').each(function() {
            const avatarWrap = document.createElement('div');
            avatarWrap.classList.add('avatar-wrap')
            const img = new Image()
            img.src = $(this).val()

            $(avatarWrap).append(img)
            $(this).closest('.hs-form-radio-display').append(avatarWrap)
        })
      }

      $('[name="custom_avatar"]').on('change', function() {
        $('.avatar-edit img').attr('src', $(this).val())
      })
    });
  </script>

{% endblock body %}
