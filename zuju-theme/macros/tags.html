<!--
  templateType: "none"
  isAvailableForNewContent: false
-->

{# {% macro tx(prop) %}
	{% if currLang == 'zh-cn' %}
		{% set affix = '_chinese' %}
	{% else %}
		{% set affix = '' %}
	{% endif %}

	{{ prop~affix }}
{% endmacro %} #}

{% macro avatar() %}
	{% if contact.custom_avatar %}
		<img src="{{ request.scheme~'://'~request.domain }}/hubfs/theme-assets/avatars/{{ contact.custom_avatar }}.svg" alt="user avatar" loading="lazy">
	{% else %}
		<img src="{{ get_asset_url('zuju-theme/images/assets/icons/avatar-default.png') }}" alt="user avatar" loading="lazy">
	{% endif %}
{% endmacro %}

{# Custom menu #}
{% macro z_menu(menu_id, ul_class, link_class) %}
	<ul class="{{ ul_class }}">
		{% set node = menu(menu_id || 'default') %}

		{% for child in node.children %}
			<li class="{{ 'active' if child.activeNode }}"><a href="{{ child.url }}" class="{{ link_class }}">{{ child.label }}</a></li>
		{% endfor %}
	</ul>
{% endmacro %}

{# Arrow right #}
{% macro arrow_right() %}
	<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
		<path fill-rule="evenodd" clip-rule="evenodd" d="M14.3978 5.00003L20 10.7417V12.3493L14.3978 18.0909L12.8067 16.4833L16.4818 12.6938H4V10.3972H16.4818L12.7843 6.60769L14.3978 5.00003Z" fill="#C5C5C5"/>
		<mask id="mask0" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="4" y="5" width="16" height="14">
			<path fill-rule="evenodd" clip-rule="evenodd" d="M14.3978 5.00003L20 10.7417V12.3493L14.3978 18.0909L12.8067 16.4833L16.4818 12.6938H4V10.3972H16.4818L12.7843 6.60769L14.3978 5.00003Z" fill="white"/>
		</mask>
		<g mask="url(#mask0)">
			<rect width="24" height="24" fill="white"/>
		</g>
	</svg>
{% endmacro %}

{% macro chevron_left() %}
	<svg width="16" height="30" viewBox="0 0 16 30" fill="none" xmlns="http://www.w3.org/2000/svg">
		<path d="M0.337571 13.9999L14.0404 0.335019C14.4893 -0.112433 15.2162 -0.111681 15.6644 0.337333C16.1123 0.78629 16.1111 1.51357 15.6621 1.96136L2.77492 14.813L15.6626 27.6645C16.1115 28.1123 16.1127 28.8392 15.6649 29.2882C15.4402 29.5133 15.1458 29.6258 14.8515 29.6258C14.5579 29.6258 14.2647 29.514 14.0404 29.2905L0.337571 15.6259C0.121338 15.4108 0 15.118 0 14.813C0 14.5079 0.121685 14.2155 0.337571 13.9999Z" fill="white"/>
	</svg>
{% endmacro %}

{% macro icon_weibo() %}
	<svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="weibo" class="svg-inline--fa fa-weibo" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M407 177.6c7.6-24-13.4-46.8-37.4-41.7-22 4.8-28.8-28.1-7.1-32.8 50.1-10.9 92.3 37.1 76.5 84.8-6.8 21.2-38.8 10.8-32-10.3zM214.8 446.7C108.5 446.7 0 395.3 0 310.4c0-44.3 28-95.4 76.3-143.7C176 67 279.5 65.8 249.9 161c-4 13.1 12.3 5.7 12.3 6 79.5-33.6 140.5-16.8 114 51.4-3.7 9.4 1.1 10.9 8.3 13.1 135.7 42.3 34.8 215.2-169.7 215.2zm143.7-146.3c-5.4-55.7-78.5-94-163.4-85.7-84.8 8.6-148.8 60.3-143.4 116s78.5 94 163.4 85.7c84.8-8.6 148.8-60.3 143.4-116zM347.9 35.1c-25.9 5.6-16.8 43.7 8.3 38.3 72.3-15.2 134.8 52.8 111.7 124-7.4 24.2 29.1 37 37.4 12 31.9-99.8-55.1-195.9-157.4-174.3zm-78.5 311c-17.1 38.8-66.8 60-109.1 46.3-40.8-13.1-58-53.4-40.3-89.7 17.7-35.4 63.1-55.4 103.4-45.1 42 10.8 63.1 50.2 46 88.5zm-86.3-30c-12.9-5.4-30 .3-38 12.9-8.3 12.9-4.3 28 8.6 34 13.1 6 30.8 .3 39.1-12.9 8-13.1 3.7-28.3-9.7-34zm32.6-13.4c-5.1-1.7-11.4 .6-14.3 5.4-2.9 5.1-1.4 10.6 3.7 12.9 5.1 2 11.7-.3 14.6-5.4 2.8-5.2 1.1-10.9-4-12.9z"></path></svg>
{% endmacro %}

{% macro icon_facebook() %}
	<svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook-square" class="svg-inline--fa fa-facebook-square fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"></path></svg>
{% endmacro %}

{% macro icon_twitter() %}
	<svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg>
{% endmacro %}

{% macro icon_youtube() %}
	<svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="youtube" class="svg-inline--fa fa-youtube fa-w-18" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg>
{% endmacro %}

{% macro icon_comment() %}
	<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="comment" class="svg-inline--fa fa-comment fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 32C114.6 32 0 125.1 0 240c0 47.6 19.9 91.2 52.9 126.3C38 405.7 7 439.1 6.5 439.5c-6.6 7-8.4 17.2-4.6 26S14.4 480 24 480c61.5 0 110-25.7 139.1-46.3C192 442.8 223.2 448 256 448c141.4 0 256-93.1 256-208S397.4 32 256 32zm0 368c-26.7 0-53.1-4.1-78.4-12.1l-22.7-7.2-19.5 13.8c-14.3 10.1-33.9 21.4-57.5 29 7.3-12.1 14.4-25.7 19.9-40.2l10.6-28.1-20.6-21.8C69.7 314.1 48 282.2 48 240c0-88.2 93.3-160 208-160s208 71.8 208 160-93.3 160-208 160z"></path></svg>
{% endmacro %}

{% macro icon_instagram() %}
	<svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="instagram" class="svg-inline--fa fa-instagram fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"></path></svg>
{% endmacro %}

{% macro icon_chevron_down() %}
	<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
		<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
	</svg>
{% endmacro %}

{% macro icon_cross() %}
	<svg
		width="31"
		height="31"
		viewBox="0 0 31 31"
		fill="none"
		xmlns="http://www.w3.org/2000/svg"
	>
		<path
			d="M1.35783 1.35787L29.6421 29.6421"
			stroke="#ED2938"
			stroke-linecap="square"
		/>
		<path
			d="M29.6421 1.35786L1.35783 29.6421"
			stroke="#ED2938"
			stroke-linecap="square"
		/>
	</svg>
{% endmacro %}

{% macro chevron_right() %}
	<svg width="16" height="30" viewBox="0 0 16 30" fill="none" xmlns="http://www.w3.org/2000/svg">
		<path d="M15.6624 13.9999L1.95962 0.335019C1.51067 -0.112433 0.783795 -0.111681 0.33559 0.337333C-0.112267 0.78629 -0.11111 1.51357 0.337905 1.96136L13.2251 14.813L0.337442 27.6645C-0.111515 28.1123 -0.112672 28.8392 0.335127 29.2882C0.559808 29.5133 0.854156 29.6258 1.1485 29.6258C1.4421 29.6258 1.73529 29.514 1.95956 29.2905L15.6624 15.6259C15.8787 15.4108 16 15.118 16 14.813C16 14.5079 15.8783 14.2155 15.6624 13.9999Z" fill="white"/>
	</svg>
{% endmacro %}

{# Domain #}
{% macro my_domain() %}
  {{ request.scheme~'://'~request.domain }}
{% endmacro %}

{# Filter unused tags #}
{% macro tags_exclude(tags, tag_to_exclude) %}
  {{ tags|rejectattr('slug', 'equalto', tags_to_exclude) }}
{% endmacro %}

{# Modal #}
{% macro modal(id, size = 'md', headerContent, footerContent) %}
	<div class="modal" id="{{ id }}">
		<div class="modal__overlay"></div>

		<div class="modal__main {{ size }}">
			<div class="modal__close" data-modal-close>
				{{ icon_cross() }}
			</div>

			{% if headerContent %}
				<header class="modal__header">{{ headerContent }}</header>
			{% endif %}

			<div class="modal__body">
				{{ caller() }}
			</div>

			{% if footerContent %}
				<div class="modal__footer">{{ footerContent }}</div>
			{% endif %}
		</div>
	</div>
{% endmacro %}

{% set locale = {
		'en': [
			{
				id: 'one',
				value: 'CR7 MEMORABILIA',
			}, {
				id: 'two',
				value: 'ELECTRONICS'
			}, {
				id: 'three',
				value: 'CR7 EXPERIENCES'
			}, {
				id: 'four',
				value: 'GIFT CARDS'
			}
		],
		'zh-cn': [
			{
				id: 'one',
				value: '电子产品',
			}, {
				id: 'two',
				value: 'C罗相关纪念奖'
			}, {
				id: 'three',
				value: 'C罗相关体验奖'
			}, {
				id: 'four',
				value: '礼品卡'
			}
		],
	}
 %}

{% macro categories(category_id) %}
	{{ (reward_categories[html_lang]|selectattr('id', 'equalto', category_id)|first).value }}
{% endmacro %}

{% macro reward_card(cardData) %}
	<a class="card" href="{{ currLang == 'zh-cn' ? '/zh-cn' : '' }}/rewards/{{ cardData.hs_path }}">
		<img
			src="{{ resize_image_url(cardData.image.url, 280, 180, 200, true, false) }}"
			alt="{{ cardData.name }}"
			loading="lazy"
			width="280px"
			height="180px"
		/>

		<div class="card__content">
			<script>
			console.log("{{ cardData.categories }}");
			</script>
			<div class="tag">{{ categories((cardData.categories|first).name) }}</div>
			<h3 class="card__title">
				{% if currLang == 'zh-cn' %}
					{{ cardData.name_chinese }}
				{% else %}
					{{ cardData.name }}
				{% endif %}
			</h3>
			<div class="card__desc">
				{% if currLang == 'zh-cn' %}
					{{ cardData.content_chinese|truncate(160) }}
				{% else %}
					{{ cardData.content|truncate(160) }}
				{% endif %}
			</div>

			{% if cardData.stock <= 0 %}
				{% set class_name = 'clr-mute' %}
				{% set label = 'Fully Redeemed' %}
			{% endif%}

			{% if contact.current_loyalty_points < cardData.point %}
				{% set class_name = 'clr-mute' %}

				{% if currLang == 'zh-cn' %}
					{% set label = 'Z积分不足' %}
				{% else %}
					{% set label = 'Insufficient Z Points' %}
				{% endif %}
			{% endif %}

			{% if  contact.current_loyalty_points > cardData.point && cardData.stock > 0 %}
				{% set class_name = '' %}
				{% set label = 'Available' %}
			{% endif %}

			<div class="availability {{ class_name }}">
				{{ label }}
			</div>

			<div class="card__footer">
				<div>
					<div class="points">
						<b>{{ cardData.point }}</b> <span class="fs-sm">{{ currLang == 'zh-cn' ? 'Z积分' : 'Z Points' }}</span>
					</div>
				</div>

				<div class="arrow-right">
					{{ arrow_right() }}
				</div>
			</div>
		</div>
	</a>
{% endmacro %}